<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Lite Go Fish</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app">
      <header class="hero">
        <div class="hero-text">
          <p class="eyebrow">Lite Go Fish</p>
          <h1>Ask. Draw. Book.</h1>
          <p class="subtitle">
            A quick hot-seat card game for two players on one screen.
          </p>
        </div>
        <div class="hero-actions">
          <button class="btn primary" id="newGameBtn" type="button">
            New game
          </button>
          <button class="btn ghost" id="toggleRulesBtn" type="button">
            Rules
          </button>
          <div class="opponent-control" role="group" aria-label="Opponent">
            <span class="toggle-label">Opponent</span>
            <div class="toggle-group">
              <button class="toggle-btn" id="opponentAiBtn" type="button">
                AI
              </button>
              <button class="toggle-btn" id="opponentHumanBtn" type="button">
                Human
              </button>
            </div>
          </div>
          <label class="difficulty-control" for="aiDifficultySelect">
            <span class="toggle-label">AI Mode</span>
            <select id="aiDifficultySelect" class="difficulty-select"></select>
          </label>
          <label class="difficulty-control" for="appModeSelect">
            <span class="toggle-label">Mode</span>
            <select id="appModeSelect" class="difficulty-select">
              <option value="human-vs-ai">Human vs AI</option>
              <option value="ai-tournament">AI Tournament</option>
            </select>
          </label>
        </div>
      </header>

      <section class="stats">
        <div class="stat">
          <span class="stat-label">Deck</span>
          <strong class="stat-value" id="deckCount">52</strong>
        </div>
        <div class="stat" id="aiModeStat">
          <span class="stat-label">AI Mode</span>
          <strong class="stat-value" id="aiModeLabel">Dad-Slayer</strong>
        </div>
        <div class="stat">
          <span class="stat-label">Turn</span>
          <strong class="stat-value" id="turnLabel">Player 1</strong>
        </div>
        <div class="stat">
          <span class="stat-label">Books</span>
          <strong class="stat-value" id="booksTotal">0 / 13</strong>
        </div>
      </section>

      <section class="rules" id="tournamentPanel" hidden>
        <h2>AI Tournament</h2>
        <div class="hero-actions" style="margin-top:10px;">
          <label class="difficulty-control" for="tournamentPolicyA">
            <span class="toggle-label">Policy A</span>
            <select id="tournamentPolicyA" class="difficulty-select"></select>
          </label>
          <label class="difficulty-control" for="tournamentPolicyB">
            <span class="toggle-label">Policy B</span>
            <select id="tournamentPolicyB" class="difficulty-select"></select>
          </label>
          <label class="difficulty-control" for="tournamentGames">
            <span class="toggle-label">Games</span>
            <input id="tournamentGames" class="difficulty-select" type="number" min="1" max="5000" value="100" style="width:110px;" />
          </label>
          <button class="btn primary" id="runTournamentBtn" type="button">Run Tournament</button>
        </div>
        <p class="rules-note" id="tournamentStatus">Idle.</p>
        <div class="stat" style="margin-top:10px;">
          <span class="stat-label">Visualization</span>
          <div style="display:flex; gap:8px; margin-top:8px; align-items:center;">
            <span id="barALabel" style="width:90px;">Policy A</span>
            <div style="flex:1; background:rgba(255,255,255,0.12); border-radius:999px; overflow:hidden; height:16px;">
              <div id="barA" style="height:16px; width:0%; background:#f2c14e;"></div>
            </div>
            <strong id="barAText" style="width:90px; text-align:right;">0%</strong>
          </div>
          <div style="display:flex; gap:8px; margin-top:8px; align-items:center;">
            <span id="barBLabel" style="width:90px;">Policy B</span>
            <div style="flex:1; background:rgba(255,255,255,0.12); border-radius:999px; overflow:hidden; height:16px;">
              <div id="barB" style="height:16px; width:0%; background:#e36c5a;"></div>
            </div>
            <strong id="barBText" style="width:90px; text-align:right;">0%</strong>
          </div>
          <p class="rules-note" id="tournamentSummary" style="margin-top:10px;">No runs yet.</p>
        </div>
      </section>

      <section class="table" id="tableSection">
        <div class="player-panel" id="player1Panel">
          <div class="panel-header">
            <div>
              <h2 class="player-name" id="player1Name">Player 1</h2>
              <p class="player-sub">Left seat</p>
            </div>
            <span class="turn-badge" id="player1Badge">Waiting</span>
          </div>
          <div class="panel-meta">
            <div class="meta-item">
              Cards <strong id="player1Cards">0</strong>
            </div>
            <div class="meta-item">
              Books <strong id="player1BooksCount">0</strong>
            </div>
          </div>
          <div class="books" id="player1Books"></div>
        </div>

        <div class="center-panel">
          <div class="prompt-card">
            <div class="prompt-header">
              <h2>Your hand</h2>
              <p class="prompt-sub">Click a rank to ask for it.</p>
            </div>
            <div class="rank-grid" id="askButtons"></div>
            <p class="status-text" id="statusText">
              Waiting for the game to start.
            </p>
          </div>
          <div class="log-card">
            <div class="log-header">
              <h2>Table talk</h2>
              <span class="log-sub">Last 12 moves</span>
            </div>
            <ul class="log-list" id="logList" aria-live="polite"></ul>
          </div>
        </div>

        <div class="player-panel" id="player2Panel">
          <div class="panel-header">
            <div>
              <h2 class="player-name" id="player2Name">Player 2</h2>
              <p class="player-sub">Right seat</p>
            </div>
            <span class="turn-badge" id="player2Badge">Waiting</span>
          </div>
          <div class="panel-meta">
            <div class="meta-item">
              Cards <strong id="player2Cards">0</strong>
            </div>
            <div class="meta-item">
              Books <strong id="player2BooksCount">0</strong>
            </div>
          </div>
          <div class="books" id="player2Books"></div>
        </div>
      </section>

      <section class="rules" id="rulesPanel" hidden>
        <h2>How to play</h2>
        <ol>
          <li>On your turn, ask for a rank you already hold.</li>
          <li>
            If your opponent has any of that rank, they hand them over and you
            go again.
          </li>
          <li>
            If not, draw one card from the deck. If it matches, go again.
            Otherwise the turn passes.
          </li>
          <li>When you collect all four of a rank, you book it.</li>
          <li>The game ends when all 13 books are made.</li>
        </ol>
        <p class="rules-note">
          Hands are hidden during the handoff screen. AI turns run automatically.
        </p>
      </section>
    </main>

    <script src="engine.js"></script>
    <script src="policies/random.js"></script>
    <script src="policies/dadslayer.js"></script>
    <script src="policies/manifest.js"></script>
    <script src="policies/policy-loader.js"></script>
    <script src="app.js"></script>
  </body>
</html>
